import{r as a,A as x,a8 as j,j as s,d as f,a9 as N,z as v,aa as y,ab as b}from"./index-BXbcqYUm.js";const I=()=>{const[l,d]=a.useState(!0),[e,u]=a.useState(null),[r,m]=a.useState(null),n=x(),c=j();a.useEffect(()=>{(async()=>{try{const t=new URLSearchParams(c.search).get("session_id");if(!t)throw new Error("No se encontró el ID de la sesión");const p=await b(t);u(p)}catch(i){console.error("Error al verificar el pago:",i),m("No pudimos verificar tu pago. Por favor, contacta con soporte.")}finally{d(!1)}})()},[c.search]);const h=()=>{e&&e.courseId?n(`/course/${e.courseId}`):n("/profile/courses")},o=()=>{n("/profile/courses")};return l?s.jsxs("div",{className:"payment-success-container loading",children:[s.jsx(f,{className:"spinner"}),s.jsx("h2",{children:"Verificando tu pago..."}),s.jsx("p",{children:"Esto puede tomar unos momentos. Por favor, no cierres esta página."})]}):r?s.jsxs("div",{className:"payment-success-container error",children:[s.jsx("div",{className:"error-icon",children:"❌"}),s.jsx("h2",{children:"Hubo un problema"}),s.jsx("p",{children:r}),s.jsx("button",{className:"action-button",onClick:o,children:"Ir a mi perfil"})]}):s.jsxs("div",{className:"payment-success-container",children:[s.jsx("div",{className:"success-icon",children:s.jsx(N,{})}),s.jsx("h1",{children:"¡Pago completado con éxito!"}),s.jsxs("div",{className:"payment-details",children:[s.jsx("p",{className:"thank-you",children:"Gracias por tu compra"}),e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Curso:"}),s.jsx("span",{children:e.courseName})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Monto:"}),s.jsxs("span",{children:[e.amount," €"]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Fecha:"}),s.jsx("span",{children:new Date(e.paymentDate).toLocaleDateString()})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Número de orden:"}),s.jsx("span",{children:e.orderId})]})]})]}),s.jsxs("div",{className:"receipt-section",children:[s.jsx("p",{children:"Hemos enviado un recibo a tu correo electrónico."}),s.jsxs("button",{className:"download-button",children:[s.jsx(v,{})," Descargar recibo"]})]}),s.jsxs("div",{className:"next-steps",children:[s.jsx("h3",{children:"¿Qué sigue?"}),s.jsx("p",{children:"Ya puedes acceder a tu curso desde tu perfil o haciendo clic en el botón de abajo."}),s.jsxs("div",{className:"action-buttons",children:[s.jsxs("button",{className:"action-button primary",onClick:h,children:["Ir al curso ",s.jsx(y,{})]}),s.jsx("button",{className:"action-button secondary",onClick:o,children:"Ver mis cursos"})]})]})]})};export{I as default};
