import{r as a,A as q,j as e,v as M,B,C as J,D as _,E as z,I as Y,J as H}from"./index-BXbcqYUm.js";import{f as K}from"./flayerTania-CfVAnePq.js";/* empty css                       */const Q=r=>{if(!r)return"";if(r.includes("/embed"))return r;let l="";const x=/instagram\.com\/(?:reel|p)\/([^/?]+)/,t=r.match(x);if(t&&t[1])l=t[1];else return`${r}/embed/captioned/?hidecaption=true&autoplay=false`;return`https://www.instagram.com/reel/${l}/embed/captioned/?hidecaption=true&autoplay=false`},se=()=>{const[r,l]=a.useState(!1),[x,t]=a.useState(null),[T,d]=a.useState(null),[o,F]=a.useState("video"),[i,n]=a.useState("https://www.instagram.com/reel/DGjn9YcNr2B/"),[h,p]=a.useState("Descubre nuestras instalaciones y conoce más sobre nuestra metodología de enseñanza."),[m,f]=a.useState(K),[v,b]=a.useState("Próximos Cursos y Eventos"),[g,y]=a.useState("Mantente al día con nuestras últimas novedades, promociones especiales y eventos exclusivos."),[c,N]=a.useState(!1),[U,C]=a.useState(""),[w,S]=a.useState(""),[V,I]=a.useState(""),[k,A]=a.useState(""),[D,L]=a.useState(""),[P,j]=a.useState(!1),E=q();a.useEffect(()=>{(()=>{try{const u=JSON.parse(localStorage.getItem("akademia_user_data")||"{}");if(!(u&&(u.email==="admin@gmail.com"||u.isAdmin===!0))){console.log("No es administrador, redirigiendo a la página principal..."),E("/");return}}catch(u){console.error("Error al verificar permisos de administrador:",u),t("Error al verificar permisos. Por favor, inténtalo de nuevo.")}})()},[E]);const R=()=>{C(i),S(h),I(m),A(v),L(g),N(!0),t(null),d(null)},O=()=>{n(U),p(w),f(V),b(k),y(D),N(!1),t(null),d(null)},G=()=>{try{l(!0),t(null),d(null),console.log("Guardando cambios..."),console.log("Video URL:",i),console.log("Video Text:",h),console.log("Flyer URL:",m),console.log("Flyer Title:",v),console.log("Flyer Text:",g),setTimeout(()=>{l(!1),d("Cambios guardados correctamente"),N(!1)},1e3)}catch(s){console.error("Error al guardar cambios:",s),t("Error al guardar los cambios. Por favor, inténtalo de nuevo."),l(!1)}},$=()=>{try{if(!window.confirm("¿Estás seguro de que deseas eliminar este contenido?"))return;l(!0),t(null),d(null),console.log("Eliminando contenido..."),setTimeout(()=>{o==="video"?(n(""),p("")):(f(""),b(""),y("")),l(!1),d("Contenido eliminado correctamente")},1e3)}catch(s){console.error("Error al eliminar contenido:",s),t("Error al eliminar el contenido. Por favor, inténtalo de nuevo."),l(!1)}};return e.jsxs("div",{className:"admin-content",children:[e.jsx("div",{className:"dashboard-header",children:e.jsx("h1",{children:"Panel de Administración de Contenido"})}),x&&e.jsx("div",{className:"error-message",children:x}),T&&e.jsx("div",{className:"success-message",children:T}),e.jsxs("div",{className:"content-tabs",children:[e.jsxs("button",{className:`tab-button ${o==="video"?"active":""}`,onClick:()=>F("video"),children:[e.jsx(M,{})," Video de Instagram"]}),e.jsxs("button",{className:`tab-button ${o==="flyer"?"active":""}`,onClick:()=>F("flyer"),children:[e.jsx(B,{})," Flyer Informativo"]})]}),e.jsxs("div",{className:"content-editor",children:[o==="video"&&e.jsxs("div",{className:"video-editor",children:[e.jsx("h2",{children:"Editar Video de Instagram"}),e.jsx("p",{className:"editor-description",children:'Introduce la URL del video de Instagram que deseas mostrar en la sección "Conoce Nuestra Academia".'}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"videoUrl",children:"URL del Video:"}),e.jsxs("div",{className:"input-with-button",children:[e.jsx("input",{type:"text",id:"videoUrl",value:i,onChange:s=>n(s.target.value),placeholder:"https://www.instagram.com/reel/CODIGO/",className:"form-control",disabled:!c}),c&&e.jsx("button",{type:"button",className:"test-button",onClick:()=>{j(!1);const s=i;n(""),setTimeout(()=>n(s),100)},title:"Probar URL",children:"Probar"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"videoText",children:"Texto descriptivo:"}),e.jsx("textarea",{id:"videoText",value:h,onChange:s=>p(s.target.value),placeholder:"Descripción del video",className:"form-control",rows:"3",disabled:!c})]}),e.jsxs("div",{className:"preview-container",children:[e.jsx("h3",{children:"Vista previa:"}),e.jsxs("div",{className:"preview-content",children:[e.jsx("div",{className:"video-preview",children:i?P?e.jsxs("div",{className:"video-error",children:[e.jsx("p",{children:"Error al cargar el video"}),e.jsx("button",{className:"retry-button",onClick:()=>{j(!1);const s=i;n(""),setTimeout(()=>n(s),100)},children:"Reintentar"})]}):e.jsx("iframe",{src:Q(i),style:{border:"none"},allowFullScreen:!0,title:"Vista previa del video de Instagram",onError:()=>j(!0),onLoad:()=>j(!1)}):e.jsx("div",{className:"no-video-message",children:"No hay video seleccionado"})}),e.jsx("div",{className:"preview-text",children:e.jsx("p",{children:h})})]})]})]}),o==="flyer"&&e.jsxs("div",{className:"flyer-editor",children:[e.jsx("h2",{children:"Editar Flyer Informativo"}),e.jsx("p",{className:"editor-description",children:'Introduce la URL de la imagen que deseas mostrar como flyer en la sección "Información Destacada".'}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"flyerUrl",children:"URL de la Imagen:"}),e.jsx("input",{type:"text",id:"flyerUrl",value:m,onChange:s=>f(s.target.value),placeholder:"https://ejemplo.com/imagen.jpg",className:"form-control",disabled:!c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"flyerTitle",children:"Título del Flyer:"}),e.jsx("input",{type:"text",id:"flyerTitle",value:v,onChange:s=>b(s.target.value),placeholder:"Título del flyer",className:"form-control",disabled:!c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"flyerText",children:"Texto descriptivo:"}),e.jsx("textarea",{id:"flyerText",value:g,onChange:s=>y(s.target.value),placeholder:"Descripción del flyer",className:"form-control",rows:"3",disabled:!c})]}),e.jsxs("div",{className:"preview-container",children:[e.jsx("h3",{children:"Vista previa:"}),e.jsxs("div",{className:"preview-content",children:[e.jsx("div",{className:"flyer-preview",children:m?e.jsx("img",{src:m,alt:"Vista previa del flyer"}):e.jsx("div",{className:"no-flyer-message",children:"No hay imagen seleccionada"})}),e.jsxs("div",{className:"preview-text",children:[e.jsx("h4",{children:v}),e.jsx("p",{children:g})]})]})]})]}),e.jsx("div",{className:"action-buttons",children:c?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"save-button",onClick:G,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"spinning"})," Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{})," Guardar Cambios"]})}),e.jsxs("button",{className:"cancel-button",onClick:O,disabled:r,children:[e.jsx(H,{})," Cancelar"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"edit-button",onClick:R,disabled:r,children:[e.jsx(J,{})," Editar"]}),e.jsxs("button",{className:"delete-button",onClick:$,disabled:r||o==="video"&&!i||o==="flyer"&&!m,children:[e.jsx(_,{})," Eliminar"]})]})})]})]})};export{se as default};
