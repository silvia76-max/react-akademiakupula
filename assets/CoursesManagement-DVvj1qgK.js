import{r as l,j as e,I as w,M as f,P as S,C as E,D as y,Q as D,R as F}from"./index-Q5swbgvz.js";const I=()=>{const[d,n]=l.useState([]),[u,i]=l.useState(!0),[o,r]=l.useState(null),[c,x]=l.useState(""),[a,j]=l.useState(null),[m,h]=l.useState(!1);l.useEffect(()=>{(async()=>{try{i(!0);const t=await D();n(t||[]),r(null)}catch{r("Error al cargar los cursos. Por favor, inténtalo de nuevo."),n([])}finally{i(!1)}})()},[]);const N=d.filter(s=>(s.titulo||"").toLowerCase().includes(c.toLowerCase())||(s.descripcion||"").toLowerCase().includes(c.toLowerCase())||(s.nivel||"").toLowerCase().includes(c.toLowerCase())),v=s=>{s.preventDefault()},p=s=>{j(s),h(!0)},C=s=>{alert(`Editar curso con ID: ${s}`)},b=async s=>{if(window.confirm("¿Estás seguro de que deseas eliminar este curso?"))try{i(!0),await F(s),n(d.filter(t=>t.id!==s)),r(null)}catch{r("Error al eliminar el curso. Por favor, inténtalo de nuevo.")}finally{i(!1)}},g=()=>{alert("Añadir nuevo curso")};return e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Gestión de Cursos"}),e.jsxs("button",{className:"add-button",onClick:g,children:[e.jsx(w,{})," Nuevo Curso"]})]}),e.jsx("div",{className:"search-bar",children:e.jsxs("form",{onSubmit:v,children:[e.jsx("input",{type:"text",placeholder:"Buscar por título, descripción o nivel...",value:c,onChange:s=>x(s.target.value)}),e.jsx("button",{type:"submit",children:e.jsx(f,{})})]})}),o&&e.jsx("div",{className:"error-message",children:o}),u?e.jsx("div",{className:"loading-spinner",children:"Cargando..."}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Imagen"}),e.jsx("th",{children:"Título"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Duración"}),e.jsx("th",{children:"Nivel"}),e.jsx("th",{children:"Instructor"}),e.jsx("th",{children:"Destacado"}),e.jsx("th",{children:"Activo"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:N.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.imagen_url?e.jsx("img",{src:s.imagen_url,alt:s.titulo,className:"course-thumbnail"}):null}),e.jsx("td",{children:s.titulo}),e.jsxs("td",{children:[s.precio?s.precio.toFixed(2):"0.00"," €"]}),e.jsx("td",{children:s.duracion}),e.jsx("td",{children:s.nivel}),e.jsx("td",{children:s.instructor}),e.jsx("td",{children:s.destacado?"Sí":"No"}),e.jsx("td",{children:s.activo?"Sí":"No"}),e.jsxs("td",{className:"actions-cell",children:[e.jsx("button",{className:"view-button",onClick:()=>p(s),title:"Ver detalles",children:e.jsx(S,{})}),e.jsx("button",{className:"edit-button",onClick:()=>C(s.id),title:"Editar curso",children:e.jsx(E,{})}),e.jsx("button",{className:"delete-button",onClick:()=>b(s.id),title:"Eliminar curso",children:e.jsx(y,{})})]})]},s.id))})]})}),m&&a&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content course-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:a.titulo}),e.jsx("button",{className:"close-button",onClick:()=>h(!1),children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"course-image-container",children:a.imagen_url&&e.jsx("img",{src:a.imagen_url,alt:a.titulo,className:"course-detail-image"})}),e.jsxs("div",{className:"course-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Instructor:"}),e.jsx("span",{className:"detail-value",children:a.instructor})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Precio:"}),e.jsxs("span",{className:"detail-value",children:[a.precio?a.precio.toFixed(2):"0.00"," €"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Duración:"}),e.jsx("span",{className:"detail-value",children:a.duracion})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Nivel:"}),e.jsx("span",{className:"detail-value",children:a.nivel})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Destacado:"}),e.jsx("span",{className:"detail-value",children:a.destacado?"Sí":"No"})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Activo:"}),e.jsx("span",{className:"detail-value",children:a.activo?"Sí":"No"})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Fecha de creación:"}),e.jsx("span",{className:"detail-value",children:a.created_at?new Date(a.created_at).toLocaleDateString():""})]})]}),e.jsxs("div",{className:"course-description",children:[e.jsx("h3",{children:"Descripción"}),e.jsx("p",{children:a.descripcion})]})]})]})})]})};export{I as default};
